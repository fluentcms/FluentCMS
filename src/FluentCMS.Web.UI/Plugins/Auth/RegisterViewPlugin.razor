@inject AccountClient AccountClient
@inject NavigationManager NavigationManager
<EditForm Model="Model" OnValidSubmit="Register">
    <Typography Size="TextSize.H5">
        Your Best Work Starts Here
    </Typography>
    <Spacer/>
    <Input @bind-Value="Model.Username"
           Label="What should we call you?"
           Placeholder="Enter your name"
           Required="true"/>
    <Input @bind-Value="Model.Email"
           Label="Email"
           Placeholder="Enter your email"
           Required="true"
           Type="InputType.Email"/>
    <Input @bind-Value="Model.Password"
           Label="Password"
           Placeholder="Enter your password"
           Type="InputType.Password"
           Required="true"/>
    <Checkbox>
        <LabelFragment>
            By signing up, you are creating a Sendinblue account, and you agree to FluentCMSâ€™s
            <Button Color="Color.Primary"
                    Href="/"
                    Link="true">
                Terms of Use
            </Button>
            and
            <Button Color="Color.Primary"
                    Href="/"
                    Link="true">
                Privacy Policy
            </Button>.
        </LabelFragment>
    </Checkbox>
    <Checkbox Label="Email me about product updates and resources."/>
    <Button Block="true"
            Color="Color.Primary"
            Type="ButtonType.Submit">
        Sign Up
    </Button>
    <Spacer/>
    <Typography Color="Color.Secondary">
        Already have an account?
        <Button Color="Color.Primary"
                Href="/auth/login"
                Link="true">
            Login here
        </Button>
    </Typography>
</EditForm>

@code{

    public UserRegisterRequest Model { get; set; } = new();

    private async Task Register()
    {
        var result = await AccountClient.RegisterAsync(Model);
        if (result.Errors.Count == 0)
        {
            NavigationManager.NavigateTo("/");
        }
    }

}
