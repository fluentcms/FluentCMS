<Form Model="@Model"
      OnSubmit="OnSubmit">
    <Typography Size="TextSize.H5">
        Reset your Password
    </Typography>
    <Typography Color="Color.Secondary">
        We’ll email you instructions to reset your password. If you don’t have access to your email anymore, you can try account recovery.
    </Typography>
    <Spacer />
    <Input @bind-Value="Model.Email"
           autofocus="true"
           Disabled="!agree"
           Label="Email"
           Name="Email"
           Placeholder="Enter your email"
           Required="true" />
    <Checkbox @bind-Value="agree">
        <LabelFragment>
            I’am agree to FluentCMS’s
            <Button Color="Color.Primary"
                    Href="/"
                    Link="true">
                Terms of Use
            </Button>
            and
            <Button Color="Color.Primary"
                    Href="/"
                    Link="true">
                Privacy Policy
            </Button>.
        </LabelFragment>
    </Checkbox>
    <Button Block="true"
            Color="Color.Primary"
            Type="ButtonType.Submit">
        Reset password
    </Button>
    <Spacer />
    <Button Color="Color.Primary"
            Link="true">
        I can’t recover my account using this page
    </Button>
</Form>

@code
{
    [Inject]
    AccountClient AccountClient { get; set; } = default!;

    [Inject]
    NavigationManager NavigationManager { get; set; } = default!;

    bool agree;

    UserSendPasswordResetTokenRequest Model { get; set; } = new();

    private async Task OnSubmit()
    {
        await AccountClient.SendPasswordResetTokenAsync(Model);

        NavigationManager.NavigateTo("/auth/reset-password?email=" + Model.Email, true);
    }
}
