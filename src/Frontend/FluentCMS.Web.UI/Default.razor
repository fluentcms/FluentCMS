@page "/{**Route:nonfile}"

<PageTitle>@ViewState.Page?.Title</PageTitle>
@if (ViewState.Type == ViewStateType.PageEdit)
{
    <HeadContent>
        <link rel="stylesheet" href="/_content/FluentCMS.Web.UI/css/sitebuilder.editor.css">
    </HeadContent>
    <div class="f-page-editor">
        <Toolbar>
            <ActionsStart>
                <ToolbarButton data-action="back">
                    Back
                </ToolbarButton>
                <ToolbarButton>
                    Pages
                </ToolbarButton>
                <ToolbarButton>
                    (ICON) Page Settings
                </ToolbarButton>
            </ActionsStart>
            
            <ActionsCenter>
                <ToolbarButton>Mobile</ToolbarButton>
                <ToolbarButton>Tablet</ToolbarButton>
                <ToolbarButton>Laptop</ToolbarButton>
                <ToolbarButton>Monitor</ToolbarButton>
            </ActionsCenter>
            <ActionsEnd>
                <ToolbarButton Href="?pageEdit=true">
                    Edit
                </ToolbarButton>
            </ActionsEnd>
        </Toolbar>
        <div class="f-page-editor-iframe-wrapper">
            <div class="f-page-editor-iframe-resizer">
            </div>
            <iframe class="f-page-editor-iframe" src="@NavigationManager.Uri.Replace("pageEdit", "pagePreview")">
            </iframe>
        </div>
        <PageEditorSidebar />
    </div>
    <PageEditorForms />
    <script type="module" src="/_content/FluentCMS.Web.UI/js/sitebuilder.editor.js"></script>
}
else if (ViewState.Type == ViewStateType.PagePreview)
{
    <HeadContent>
        <link rel="stylesheet" href="/_content/FluentCMS.Web.UI/css/sitebuilder.preview.css">
        @RenderDynamicContent(ViewState.Layout?.Head ?? string.Empty)
    </HeadContent>
    @RenderDynamicContent(ViewState.Layout?.Body ?? string.Empty)

    <PluginActionsForms />

    <script type="module" src="/_content/FluentCMS.Web.UI/js/sitebuilder.preview.js"></script>
}
else
{
    
    <HeadContent>
        @RenderDynamicContent(ViewState.Layout?.Head ?? string.Empty)
        @if (ViewState.Type == ViewStateType.Default && !ViewState.Page.Locked)
        {
            <link rel="stylesheet" href="/_content/FluentCMS.Web.UI/css/sitebuilder.default.css">
        }            
        <link rel="stylesheet" href="/_content/FluentCMS.Web.UI/css/grid-system.css">
    </HeadContent>
    <Toolbar>
        <ActionsStart>
            <ToolbarButton>
                Pages
            </ToolbarButton>
            <ToolbarButton>
                (ICON) Page Settings
            </ToolbarButton>
        </ActionsStart>
        
        <ActionsCenter>

        </ActionsCenter>
        <ActionsEnd>
            <ToolbarButton id="editContentButton">
                Edit Content
            </ToolbarButton>

            <ToolbarButton id="editButton">
                Edit
            </ToolbarButton>
        </ActionsEnd>
    </Toolbar>
    @RenderDynamicContent(ViewState.Layout?.Body ?? string.Empty)
    @if (ViewState.Type == ViewStateType.Default && !ViewState.Page.Locked)
    {
        <PluginActionsForms />
    }

    <script type="module" src="/_content/FluentCMS.Web.UI/js/sitebuilder.default.js"></script>
}
