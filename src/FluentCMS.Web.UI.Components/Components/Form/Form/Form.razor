@inherits BaseComponent

@namespace FluentCMS.Web.UI.Components

<EditForm @attributes="AdditionalAttributes"
          class="@this.GetClasses()"
          EditContext="@Context"
          FormName="@FormName"
          method="@Method"
          novalidate
          OnValidSubmit="@OnValidSubmit">
    <DataAnnotationsValidator />
    @ChildContent
</EditForm>

@code {
    [Parameter]
    public string? FormName { get; set; }

    [Parameter]
    public string? Method { get; set; }

    [Parameter]
    public object? Model { get; set; }

    [Parameter]
    public EventCallback OnSubmit { get; set; }

    EditContext? Context;

    protected override void OnInitialized()
    {
        if (Model != null)
        {
            Context = new EditContext(Model);
        }
    }

    async Task OnValidSubmit()
    {
        await OnSubmit.InvokeAsync();
    }
}
